/*!CK:1140537658!*//*1433277198,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["qYxaF"]); }

__d("MessengerView",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DETAIL:{COMPOSE:"detail\/compose",THREAD:"detail\/thread"},MASTER:{GROUPS:"master\/groups",PEOPLE:"master\/people",RECENT:"master\/recent"}};},null);
__d("P2PTransferRiskResult",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SUCCESS:"SUCCESS",UNDER_MANUAL_REVIEW:"UNDER_MANUAL_REVIEW",REQUIRE_VERIFICATION:"REQUIRE_VERIFICATION"};},null);
__d("MessengerURIConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={COMPOSE_SUBPATH:'/new',GROUPS_PATH:'/groups',PEOPLE_PATH:'/people',THREAD_PREFIX:'/t/',GROUP_PREFIX:'group-',RESERVED_WORDS:['groups','people','new','messenger','t']};e.exports=g;},null);
__d("MessengerStateProcessor",["MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryParticipants","MercuryServerRequests","MercuryThreads","MessengerURIConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={preprocess:function(p){var q=p.activeThreadID;if(q){var r=h.getUserIDFromThreadID(q),s=r&&j.getNow(h.getParticipantIDFromUserID(r));if(s&&s.type!==i.EVENT){p.threadKey=s.vanity||r;}else if(r&&!s){p.threadKey=r;}else{var t=k.get(),u=t.getServerThreadIDNow(q);p.threadKey=u||q;}}delete p.activeThreadID;return p;},postprocess:function(p){var q=k.get(),r=l.get(),s=o(p.threadKey),t;t=h.isValid(s)?s:q.getClientThreadIDNow(s);if(!t){var u=j.getIDFromVanityOrFBID(s),v=u&&r.getCanonicalThreadToParticipant(u,null,g.MESSENGER);if(v)t=v.thread_id;}if(t){p.activeThreadID=t;p.serverThreadID=q.getServerThreadIDNow(t);}delete p.threadKey;return p;}};function o(p){if(!p)return null;return p.startsWith(m.GROUP_PREFIX)?p.substr(m.GROUP_PREFIX.length):p;}e.exports=n;},null);
__d("MessengerURISerializer",["MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l='/?$',m={serialize:function(v){var w=new j(k.uri);v=g.preprocess(v);switch(v.masterView){case i.MASTER.GROUPS:w.setPath(h.GROUPS_PATH);break;case i.MASTER.PEOPLE:w.setPath(h.PEOPLE_PATH);break;}if(v.detailView===i.DETAIL.COMPOSE){w.setPath(w.getPath()+h.COMPOSE_SUBPATH);}else if(v.threadKey)w.setPath(w.getPath()+h.THREAD_PREFIX+t(v.threadKey));return w;},deserialize:function(v){var w={},x=v.getPath();if(x.match('^'+h.GROUPS_PATH)){w.masterView=i.MASTER.GROUPS;}else if(x.match('^'+h.PEOPLE_PATH)){w.masterView=i.MASTER.PEOPLE;}else w.masterView=i.MASTER.RECENT;if(x.match(h.COMPOSE_SUBPATH+l)){w.detailView=i.DETAIL.COMPOSE;}else{var y=n(x);if(y&&!r(y)){w.threadKey=u(y);w.detailView=i.DETAIL.THREAD;}}return g.postprocess(w);}};function n(v){var w=v.match(h.THREAD_PREFIX+'([^/]+)'+l);return w&&w[1];}var o=h.RESERVED_WORDS.join('|'),p=new RegExp('^('+o+')$'),q=new RegExp('^\\.('+o+')$');function r(v){return !!v.match(p);}function s(v){return !!v.match(q);}function t(v){v=r(v)?'.'+v:v;return j.encodeComponent(v);}function u(v){v=j.decodeComponent(v);return s(v)?v.substr(1):v;}e.exports=m;},null);
__d("MessengerActions",["MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=l({REPLACE_STATE:null,REPLACE_INFO_PANEL_VISIBILITY:null,SHOW_DIALOG:null,HIDE_DIALOG:null}),n={Types:m,changeDetailView:function(p){o(function(q){if(q.detailView!==p)return {detailView:p};});},changeMasterView:function(p){o(function(q){if(q.masterView!==p)return {masterView:p};});},selectThread:function(p){o(function(q){if(q.activeThreadID!==p)return {activeThreadID:p,detailView:i.DETAIL.THREAD};});},changeState:function(p){g.dispatch({type:m.REPLACE_STATE,nextState:p});},changeInfoPanelVisibility:function(p){g.dispatch({type:n.Types.REPLACE_INFO_PANEL_VISIBILITY,nextState:{infoPanelVisibility:p}});},showDialog:function(p,q){g.dispatch({type:n.Types.SHOW_DIALOG,dialogClass:p,dialogProps:q});},hideDialog:function(p){g.dispatch({type:n.Types.HIDE_DIALOG,dialogClass:p});}};function o(p){var q=h.deserialize(new j(window.location.href)),r=p(q);if(r)k(h.serialize(Object.assign(q,r)));}e.exports=n;},null);
__d("MessengerContextualDialog.react",["LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=12,l=i.createClass(h.createSpec({displayName:'MessengerContextualDialog',theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:k,length:16}},addedBehaviors:[g]}));e.exports=l;},null);
__d("P2PCreditCardNumberFormFieldHelper",["Keys"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={formatCardNumber:function(i,j,k,l,m){if(k===g.BACKSPACE||k===g.DELETE){var n=(j.split(m).length-1),o=(i.split(m).length-1);if(o!==n)return i;}i=i.replace(/\D/g,'');i=i.substr(0,l[l.length-1]);var p='';for(var q=1;q<l.length;q++){if(l[q]>i.length||(q===l.length-1)){p+=i.slice(l[q-1]);break;}p+=i.slice(l[q-1],l[q])+m;}return p;},getUpdatedCursorPosition:function(i,j,k,l){var m=0,n=0;while(m<k&&m<j.length&&n<i.length)if(j[m]===i[n]){m++;n++;}else if(!/^\d+$/.test(j[m])){m++;}else n++;if(i.substr(n,1)===l)n++;return n;}};e.exports=h;},null);
__d("P2PCreditCardNumberFormField.react",["React","PaymentMethodUtils","P2PCreditCardFormFieldMixin.react","P2PCreditCardNumberFormFieldHelper","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g.createClass({displayName:"P2PCreditCardFormField",mixins:[i],getIcon:function(){return (g.createElement("div",{className:"_31_w _3_2h"}));},getAutocompleteName:function(){return 'cc-number';},isAmex:function(n){var o=h.getCardType(n||this.state.value);return (o.name==='amex');},getLimit:function(){return this.isAmex()?15:16;},isValAtLimit:function(){var n=this.getLimit(),o=this.state.value.replace(/ /g,'');return o.length===n;},formatValue:function(n,o,p){var q=this.isAmex(n)?[0,4,10,15]:[0,4,8,12,16];return j.formatCardNumber(n,o,p,q,' ');},getUpdatedCursorPosition:function(n,o,p){return j.getUpdatedCursorPosition(n,o,p,' ');},getPlaceholder:function(){return l._("N\u00famero de tarjeta");},validate:function(n){var o=this.isValidCardType(n);this.setState({errorMessage:!o?l._("Introduce una tarjeta de d\u00e9bito. No se admiten tarjetas de cr\u00e9dito."):null});return !!(h.isValidCCNumber(n)&&o);},isValidCardType:function(n){var o=['mc','visa','unknown'],p=h.getCardType(n),q=p?p.name:'',r=o.indexOf(q)>=0;return r;}});e.exports=m;},null);
__d("P2PCreditCardExpDateFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardExpDateFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _31_x"}));},getAutocompleteName:function(){return 'cc-exp';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return (j._("MM\/AA"));},formatValue:function(l,m,n){var o=this.getLimit(),p=String.fromCharCode(n);l=l.replace(/[^0-9\/]+/g,'');var q=l.split('/'),r=q[0],s=q[1];if(s&&s.length===4){l=r+'/'+s.substr(-2);}else l=l.slice(0,o);if(!/^\d+$/.test(p)&&n!==191&&n!==111)return l;l=l.replace(/\D/g,'');if(/^\d$/.test(l)&&(l!=='0'&&l!=='1')){l='0'+l+'/';}else if(l.length>=2&&l.indexOf('/')===-1)l=l.substr(0,2)+'/'+l.substr(2,4);return l;},validate:function(l){var m=l.split('/'),n=(new Date()),o=parseInt(n.getFullYear().toString().substring(2),10),p=parseInt(n.getMonth()+1,10),q=parseInt(m[0],10),r=parseInt(m[1],10);if(l.length!==5||!q||!r||isNaN(q)||isNaN(r)||q<1||q>12)return false;if((r<o)||(r===o&&q<p)||q>12||q<1)return false;return true;}});e.exports=k;},null);
__d("P2PErrorDialog.react",["React","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PText.react","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g,q=p.PropTypes,r=g.createClass({displayName:"P2PErrorDialog",propTypes:{allowBack:q.bool,onBackClick:q.func,onOKClick:q.func,error:q.object,title:q.string},getDefaultProps:function(){return {allowBack:false,onBackClick:n,onOKClick:n,error:null,title:o._("Problema")};},handleBackButtonClick:function(){this.props.onBackClick();},handleOKButtonClick:function(){this.props.onOKClick();},renderBackButton:function(){var s=null;if(this.props.allowBack)s=g.createElement(h,{label:o._("Volver"),onClick:this.handleBackButtonClick,use:"default"});return s;},renderErrorContent:function(){var s=this.props.error;if(s.message.__html){return (g.createElement(m,{dangerouslySetInnerHTML:s.message,type:"primary"}));}else return g.createElement(m,{type:"primary"},s.message);},render:function(){return (g.createElement(i,{layerHideOnBlur:false,shown:true,width:300},g.createElement(l,{showCloseButton:false},this.props.title),g.createElement(j,null,this.renderErrorContent()),g.createElement(k,null,this.renderBackButton(),g.createElement(h,{label:o._("Aceptar"),onClick:this.handleOKButtonClick,use:"default"}))));}});e.exports=r;},null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","KappaWrapper","React","P2PAPI","P2PAPIUtils","P2PCreditCardNumberFormField.react","P2PCreditCardExpDateFormField.react","P2PCreditCardCVCFormField.react","P2PCreditCardZipCodeFormField.react","P2PErrorDialog.react","P2PErrorNotice.react","ReactLayeredComponentMixin","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=i,x=w.PropTypes,y=i.createClass({displayName:"P2PCreditCardForm",mixins:[r],propTypes:{asyncRequestState:x.object,cscMaxLength:x.number,editMode:x.bool,onErrorDialogOKClick:x.func,onValidation:x.func,prefilledFormData:x.object,rendersErrorDialog:x.bool,saveErrors:x.object,validateBIN:x.bool},getDefaultProps:function(){return {cscMaxLength:null,editMode:false,onErrorDialogOKClick:t,onValidation:t,prefilledFormData:{},rendersErrorDialog:false,saveErrors:null,validateBIN:false};},getInitialState:function(){var z={};z[g.CARD_NUMBER]={};z[g.CARD_NUMBER].valid=false;z[g.CARD_NUMBER].value=this.props.prefilledFormData[g.CARD_NUMBER]||'';z[g.CARD_EXPIRATION]={};z[g.CARD_EXPIRATION].valid=false;z[g.CARD_EXPIRATION].value=this.props.prefilledFormData[g.CARD_EXPIRATION]||'';z[g.CSC]={};z[g.CSC].valid=false;z[g.CSC].value=this.props.prefilledFormData[g.CSC]||'';z[g.ZIP]={};z[g.ZIP].valid=false;z[g.ZIP].value=this.props.prefilledFormData[g.ZIP]||'';return {binError:'',isValid:false,fields:z,previousBINNumber:'',validateBINRequestID:''};},componentWillMount:function(){h.start(6,3,0);},componentWillReceiveProps:function(z){var aa=z.asyncRequestState,ba=aa?aa[this.state.validateBINRequestID]:null;if(ba){this.setState({validateBINRequestID:''});if(ba.error){this.handleValidateBINNumberError(ba.error);}else this.handleValidateBINNumberSuccess();}},handleValidateBINNumberSuccess:function(){this.setState({binError:''},this.validateForm);},handleValidateBINNumberError:function(z){this.setState({binError:z.message},this.validateForm);},handleCreditCardNumberChange:function(z,aa,ba){if(this.props.validateBIN)this.validateBIN(aa);this.handleFormValueChange(z,aa,ba);},validateBIN:function(z){var aa,ba;z=z.replace(/ /g,'');aa=z.substr(0,6);if(aa!==this.state.previousBINNumber&&aa.length>=6){ba=k.genRequestID();this.setState({validateBINRequestID:ba});j.validateBINNumber({binNumber:aa,requestID:ba});}else if(aa.length<6)this.setState({binError:'',validateBINRequestID:''});this.setState({previousBINNumber:aa});},handleFormValueChange:function(z,aa,ba){var ca=this.state.fields;ca[z]={valid:ba,value:aa};this.validateForm();},validateForm:function(){var z=true,aa=this.state.fields;z=!v(aa).some(function(ba){return !ba.valid;})&&!this.state.binError;this.setState({isValid:z});this.props.onValidation(z,this.serializeFormFields(),this.getFormFieldLoggingData());},serializeFormFields:function(){var z=this.state.fields,aa={};for(var ba in z)if(z.hasOwnProperty(ba))aa[ba]=z[ba].value;return aa;},getFormFieldLoggingData:function(){var z=this.state.fields,aa=z[g.CARD_NUMBER],ba=z[g.CARD_EXPIRATION],ca=z[g.CSC],da=z[g.ZIP],ea={card_number_digits:aa.value.replace(/ /g,'').length,is_card_number_valid:aa.valid,expiration_date_digits:ba.value.replace(/\//,'').length,is_expiration_date_valid:ba.valid,csc_digits:ca.value.length,is_csc_valid:ca.valid,billing_zip_digits:da.value.length,is_billing_zip_valid:da.valid};return {credit_card_validation_data:ea};},getSaveError:function(z){var aa='',ba=this.props.saveErrors;if(ba&&ba.fields&&ba.fields[z])aa=ba.fields[z].message;return aa;},isCreditCardNumberMasked:function(){return this.props.editMode;},isCreditCardNumberFocused:function(){return !this.props.editMode;},isExpFocused:function(){return this.props.editMode;},renderBINError:function(){if(!this.state.binError)return;return (i.createElement(q,{error:{message:this.state.binError}}));},renderGeneralError:function(){var z=this.getGeneralError();if(!z)return;return (i.createElement(q,{error:z}));},getGeneralError:function(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},handleErrorOKClick:function(){this.props.onErrorDialogOKClick();},renderLayers:function(){var z=this.getGeneralError();if(!this.props.rendersErrorDialog||!z)return {};return {errorMessageDialog:i.createElement(p,{error:z,onOKClick:this.handleErrorOKClick,title:u._("Problema al guardar la tarjeta")})};},render:function(){return (i.createElement("form",{className:"_3bez"},!this.props.rendersErrorDialog?this.renderGeneralError():null,this.renderBINError(),i.createElement("div",{className:"_2xxs _2xxt"},i.createElement(l,{reference:g.CARD_NUMBER,onChange:this.handleCreditCardNumberChange,saveError:this.getSaveError(g.CARD_NUMBER)||this.state.binError,value:this.state.fields[g.CARD_NUMBER].value,isMasked:this.isCreditCardNumberMasked(),focused:this.isCreditCardNumberFocused()})),i.createElement("div",{className:"_2xxs _2xxu"},i.createElement(m,{reference:g.CARD_EXPIRATION,focused:this.isExpFocused(),onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CARD_EXPIRATION),value:this.state.fields[g.CARD_EXPIRATION].value}),i.createElement(n,{reference:g.CSC,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CSC),cscMaxLength:this.props.cscMaxLength,creditCardNumber:this.state.fields[g.CARD_NUMBER].value,value:this.state.fields[g.CSC].value})),i.createElement("div",{className:"_2xxs _2xxv"},i.createElement(o,{reference:g.ZIP,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.ZIP),value:this.state.fields[g.ZIP].value}))));}});e.exports=y;},null);
__d("P2PEditCreditCardDialog.react",["CreditCardFormParam","CurrentEnvironment","React","P2PAPI","P2PAPIUtils","P2PCreditCard","P2PCreditCardForm.react","P2PLoadingMask.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PButton.react","P2PText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=i,x=w.PropTypes,y=i.createClass({displayName:"P2PEditCreditCardDialog",propTypes:{asyncRequestState:x.object.isRequired,creditCard:x.instanceOf(l).isRequired,onCancel:x.func.isRequired,onSuccess:x.func.isRequired},getInitialState:function(){return {isValid:false,formData:{},loading:false,requestID:'',saveErrors:null};},componentWillReceiveProps:function(z){var aa=z.asyncRequestState?z.asyncRequestState[this.state.requestID]:null;if(aa){this.setState({requestID:''});if(aa.error){this.handleOnSaveError(aa.error);}else this.handleOnSaveSuccess(aa);}},clearSaveErrors:function(){this.setState({saveErrors:null});},onSaveClick:function(z){var aa={},ba=k.genRequestID();aa[g.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();this.clearSaveErrors();this.setState({loading:true,requestID:ba});j.updateCreditCard(Object.assign({requestID:ba},aa,this.state.formData));},handleOnSaveSuccess:function(z){this.props.onSuccess(z);},onCancelClick:function(z){this.props.onCancel();},handleOnSaveError:function(z){this.setState({loading:false,saveErrors:z});},isSaveDisabled:function(){return !this.state.isValid||this.state.loading;},isCancelDisabled:function(){return this.state.loading;},handleValidation:function(z,aa){this.setState({isValid:z,formData:aa});},getPrefilledFormData:function(){var z={};z[g.CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();z[g.CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();z[g.ZIP]=this.props.creditCard.getZipCode();return z;},handleErrorDialogOKClick:function(){this.clearSaveErrors();},onToggle:function(z){if(!z)this.props.onCancel();},render:function(){var z=h.messengerdotcom,aa=z?350:300;return (i.createElement(o,{layerHideOnBlur:false,onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:aa},i.createElement(p,null,v._("Actualiza la tarjeta de d\u00e9bito")),i.createElement(q,null,i.createElement(t,{className:"_3-96",type:"primary"},v._("Actualiza la fecha de caducidad de tu tarjeta que termina en {card numbers}.",[v.param("card numbers",this.props.creditCard.getCreditCardNumber())])),i.createElement(m,{onValidation:this.handleValidation,saveErrors:this.state.saveErrors,editMode:true,prefilledFormData:this.getPrefilledFormData(),cscMaxLength:this.props.creditCard.getMaxCSCLength()})),i.createElement(r,null,i.createElement(s,{use:"default",size:"medium",label:v._("Cancelar"),disabled:this.isCancelDisabled(),onClick:this.onCancelClick}),i.createElement(s,{use:"confirm",size:"medium",label:v._("Guardar"),disabled:this.isSaveDisabled(),onClick:this.onSaveClick})),i.createElement(n,{visible:this.state.loading})));}});e.exports=y;},null);
__d("P2PAddCreditCardDialog.react",["CurrentEnvironment","Link.react","P2PAPI","P2PAPIUtils","P2PCreditCardForm.react","P2PLoadingMask.react","P2PLinkConstants","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=n,y=x.PropTypes,z='fbP2PAddCreditCardDialog_learnMoreSentenceID',aa=g.messengerdotcom,ba=n.createClass({displayName:"P2PAddCreditCardDialog",propTypes:{asyncRequestState:y.object,onCancel:y.func,onError:y.func,onSaving:y.func,onSuccess:y.func,showPayButton:y.bool},getDefaultProps:function(){return {asyncRequestState:{},onCancel:v,onError:v,onSaving:v,onSuccess:v,showPayButton:false};},getInitialState:function(){return {isValid:false,formData:{},formFieldLoggingData:{},loading:false,requestID:'',saveErrors:null};},componentWillReceiveProps:function(ca){var da=ca.asyncRequestState?ca.asyncRequestState[this.state.requestID]:null;if(da){this.setState({requestID:''});if(da.error){this.handleOnSaveError(da.error);}else this.handleOnSaveSuccess(da);}},onSaveClick:function(){var ca=j.genRequestID();this.setState({loading:true,requestID:ca,saveErrors:null});this.props.onSaving();i.addCreditCard(Object.assign({requestID:ca},this.state.formData));},handleOnSaveSuccess:function(ca){this.props.onSuccess(ca);},handleOnSaveError:function(ca){this.setState({loading:false,saveErrors:ca});this.props.onError();},handleValidation:function(ca,da,ea){this.setState({isValid:ca,formData:da,formFieldLoggingData:ea});},isSaveButtonDisabled:function(){return this.state.loading||!this.state.isValid;},onToggle:function(ca){if(!ca)this.props.onCancel(this.state.formFieldLoggingData);},onCancelClicked:function(){this.onToggle(false);},getButtonType:function(){var ca='default';if(this.props.showPayButton)ca='confirm';return ca;},getButtonText:function(){var ca=w._("Guardar");if(this.props.showPayButton)ca=w._("Pagar");return ca;},renderAddCardForm:function(){var ca;if(aa)ca=n.createElement(o,{use:"default",size:"medium",label:w._("Cancelar"),disabled:this.state.loading,onClick:this.onCancelClicked});return (n.createElement("div",null,n.createElement(q,null,w._("A\u00f1adir tarjeta de d\u00e9bito")),n.createElement(r,null,n.createElement(t,{type:"primary",className:"_3-96"},w._("Introduce una tarjeta de d\u00e9bito. No se admiten tarjetas de cr\u00e9dito.")),n.createElement(k,{asyncRequestState:this.props.asyncRequestState,onValidation:this.handleValidation,saveErrors:this.state.saveErrors,validateBIN:true}),n.createElement(t,{className:"_3-8y",id:z,type:"secondary"},w._("Tu informaci\u00f3n de pago est\u00e1 guardada de forma segura. {Learn more about p2p link}",[w.param("Learn more about p2p link",n.createElement(h,{"aria-describedby":z,href:m.addDebitCardHelpURI,target:"_blank"},w._("M\u00e1s informaci\u00f3n.")))]))),n.createElement(s,null,ca,n.createElement(o,{use:this.getButtonType(),size:"medium",label:this.getButtonText(),disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick}))));},render:function(){var ca;ca=aa?350:288;return (n.createElement(p,{layerHideOnBlur:false,ref:"dialog",onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:ca},this.renderAddCardForm(),n.createElement(l,{visible:this.state.loading})));}});e.exports=ba;},null);
__d("P2PConfirmAmountDialog.react",["CurrentEnvironment","React","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","P2PText.react","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=h,s=r.PropTypes,t=g.messengerdotcom,u=h.createClass({displayName:"P2PConfirmAmountDialog",propTypes:{amount:s.string,currencySymbol:s.string,onCancel:s.func,onConfirm:s.func,receiverName:s.string},getDefaultProps:function(){return {amount:'',currencySymbol:'',onCancel:p,onConfirm:p,receiverName:s.string};},getInitialState:function(){return {loading:false};},handleCancelClick:function(){this.props.onCancel();},handleConfirmClick:function(){this.setState({loading:true});this.props.onConfirm();},getFormattedAmount:function(){var v=this.props.amount,w=(parseFloat(v)).toFixed(2);return this.props.currencySymbol+''+w;},render:function(){var v=t?350:300;return (h.createElement(j,{layerHideOnBlur:false,shown:true,width:v},h.createElement(m,{showCloseButton:false},q._("Confirmar pago")),h.createElement(k,null,h.createElement(o,{type:"primary"},q._("\u00bfQuieres pagar {amount} a {recipient name}?",[q.param("recipient name",this.props.receiverName),q.param("amount",this.getFormattedAmount())]))),h.createElement(l,null,h.createElement(i,{label:q._("Cancelar"),onClick:this.handleCancelClick,use:"default"}),h.createElement(i,{label:q._("Pagar"),onClick:this.handleConfirmClick,use:"confirm"})),h.createElement(n,{visible:this.state.loading})));}});e.exports=u;},null);
__d("P2PGroupSendDialog.react",["CurrentEnvironment","Image.react","MercuryIDs","MessengerContextualDialog.react","P2PActions","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PText.react","React","ScrollableArea.react","XUIContextualDialog.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=p,v=u.PropTypes,w=p.createClass({displayName:"P2PGroupSendDialog",propTypes:{amount:v.string,currency:v.string,onToggle:v.func.isRequired,participants:v.arrayOf(v.object).isRequired,threadFBID:v.string.isRequired},componentDidMount:function(){if(this.props.amount){this.log(m.UI_ACTN_INITIATE_GROUP_SEND_TRIGGER,{raw_amount:this.props.amount,currency:this.props.currency});}else this.log(m.UI_ACTN_INITIATE_GROUP_SEND);},log:function(x,y){l.log(x,Object.assign({www_event_flow:n.UI_FLOW_P2P_GROUP_SEND},y));},_handleToggle:function(x){this.props.onToggle(x);this.log(m.UI_ACTN_GROUP_SEND_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},renderParticipantRow:function(x){var y=g.messengerdotcom,z=y?32:40,aa=!x.p2p_eligible,ba;if(aa)ba=p.createElement(o,{className:"_4cof",type:"primary"},t._("No se puede recibir dinero en este momento"));return (p.createElement("li",{className:(("_4cog")+(aa?' '+"_4coh":'')),key:x.id,onClick:this.handleGroupThreadClicked.bind(this,x)},p.createElement("div",{className:"_4coi"},p.createElement(h,{className:"_4coj",height:z,src:x.big_image_src||x.image_src,width:z})),p.createElement("div",{className:"_4cok"},p.createElement(o,{className:"_4col",type:"primary"},x.name),ba)));},renderGroupList:function(){return (p.createElement(q,{height:178},p.createElement("ul",null,this.props.participants.map(this.renderParticipantRow))));},handleGroupThreadClicked:function(x){if(!x.p2p_eligible)return;var y=i.getThreadIDFromParticipantID(x.id);this.props.onToggle(false);k.chatSendViewOpened({amount:this.props.amount,threadID:y,groupThreadFBID:this.props.threadFBID});this.log(m.UI_ACTN_GROUP_SEND_RECIPIENT_PICKED,{raw_amount:this.props.amount,currency:this.props.currency});},render:function(){var x=g.messengerdotcom,y=x?j:r,z=x?302:280;return (p.createElement(y,{alignment:x?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:z,position:'above'},p.createElement("div",{className:(("_4com")+(x?' '+"_4con":''))},p.createElement(o,{className:"_4coo",type:"primary",weight:"bold"},t._("\u00bfA qui\u00e9n vas a pagar?")),this.renderGroupList())));}});e.exports=w;},null);
__d("P2PGroupSendReceiptDialog.react",["CurrentEnvironment","LeftRight.react","MessengerContextualDialog.react","P2PActions","P2PAmountUtils","P2PButton.react","P2PBigAmount.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PText.react","React","XUIContextualDialog.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=r,w=v.PropTypes,x=r.createClass({displayName:"P2PGroupSendReceiptDialog",propTypes:{currency:w.string.isRequired,onToggle:w.func.isRequired,groupSendReceiptDetails:w.object.isRequired,threadFBID:w.string.isRequired,threadID:w.string.isRequired},componentDidMount:function(){this.log(o.UI_ACTN_3RD_PARTY_LOG_MESSAGE_CLICKED,{raw_amount:this.props.groupSendReceiptDetails.amount,currency:this.props.currency});},log:function(y,z){n.log(y,Object.assign({www_event_flow:p.UI_FLOW_P2P_GROUP_SEND},z));},_handleToggle:function(y){this.props.onToggle(y);if(!y)this.log(o.UI_ACTN_3RD_PARTY_LOG_MESSAGE_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},handleTryItClicked:function(){j.chatSendViewOpened({threadID:this.props.threadID,groupThreadFBID:this.props.threadFBID});this.log(o.UI_ACTN_3RD_PARTY_LOG_MESSAGE_TRY_CLICKED,{raw_amount:this.props.groupSendReceiptDetails.amount,currency:this.props.currency});},render:function(){var y=g.messengerdotcom,z=y?i:s,aa=y?302:280,ba=this.props.groupSendReceiptDetails,ca=r.createElement(q,{className:"_bpt",size:"small",type:y?"secondary":"primary"},u._("{sender name} ha enviado {amount} a {receiver name}.",[u.param("sender name",ba.senderName),u.param("amount",ba.amount),u.param("receiver name",ba.receiverName)]),".");return (r.createElement(z,{alignment:y?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:aa,position:'above'},r.createElement("div",{className:(("_bpu")+(y?' '+"_bpv":''))},r.createElement(q,{className:"_bpw",type:"primary",weight:"bold"},u._("Pagos en Messenger")),r.createElement("div",{className:"_2pi9"},r.createElement(q,{className:"_bpx",type:"secondary"},u._("Ahora puedes enviar y recibir dinero.")),r.createElement("div",{className:"_bpy"},r.createElement(m,{amount:k.sanitizeAmount(ba.amount)}),y?ca:null),!y?ca:null,r.createElement(h,{className:"_2pio"},r.createElement("div",null),r.createElement(l,{use:"confirm",size:"medium",label:u._("Pru\u00e9balo"),type:"primary",onClick:this.handleTryItClicked}))))));}});e.exports=x;},null);
__d("P2PPasswordProtectionNUXDialog.react",["CurrentEnvironment","Link.react","P2PAPI","P2PErrorDialog.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPasswordProtectionParam","P2PPasswordProtectionStatusTypes","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=r,ca=ba.PropTypes,da=g.messengerdotcom,ea=r.createClass({displayName:"P2PPasswordProtectionNUXDialog",propTypes:{onComplete:ca.func},getDefaultProps:function(){return {onComplete:z};},getInitialState:function(){return {saveErrorObject:null,loading:false};},componentWillMount:function(){this.log(n.UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX);},log:function(fa,ga){m.log(fa,Object.assign({www_event_flow:o.UI_FLOW_P2P_SETTINGS},ga));},onSaveClick:function(){this.setState({loading:true,saveErrorObject:null});this.setPasswordProtection(q.ENABLED);this.log(n.UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX);},setPasswordProtection:function(fa){var ga={};ga[p.STATUS]=fa;i.setPasswordProtectionSetting({formData:ga,success:this.handleOnSaveSuccess,error:this.handleOnSaveError});},handleOnSaveSuccess:function(){this.setState({loading:false});this.props.onComplete();},handleOnSaveError:function(fa){this.setState({loading:false,saveErrorObject:fa});},isSaveButtonDisabled:function(){return this.state.loading;},isCancelButtonDisabled:function(){return this.state.loading;},onCancelClick:function(){this.setState({loading:true,saveErrorObject:null});this.setPasswordProtection(q.DISABLED);this.log(n.UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX);},handleErrorBackClick:function(){this.setState({saveErrorObject:null});},handleErrorOKClick:function(){this.setState({saveErrorObject:null});this.props.onComplete();},render:function(){var fa=da?320:300;if(this.state.saveErrorObject)return (r.createElement(j,{allowBack:true,title:aa._("Problema al guardar"),onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.saveErrorObject}));return (r.createElement(t,{className:((da?"_-el":'')),behaviors:{LayerFadeOnShow:false},layerHideOnBlur:false,shown:true,width:fa},r.createElement(u,{showCloseButton:false},aa._("\u00bfUsar contrase\u00f1a?")),r.createElement(v,null,r.createElement(x,{className:"_5sor",type:"primary"},aa._("Para obtener m\u00e1s seguridad, puedes introducir tu contrase\u00f1a de Facebook para enviar dinero. Puedes actualizar esta opci\u00f3n en cualquier momento en {link}.",[aa.param("link",r.createElement(h,{href:k.settingsWWWURI,target:"_blank"},aa._("Configuraci\u00f3n")))]))),r.createElement(w,null,r.createElement(s,{className:"_5sov",disabled:this.isCancelButtonDisabled(),label:aa._("Ahora no"),onClick:this.onCancelClick,size:"medium",use:"default"}),r.createElement(s,{className:"_5sox",disabled:this.isSaveButtonDisabled(),label:aa._("Usar contrase\u00f1a"),onClick:this.onSaveClick,size:"medium",use:"confirm"})),r.createElement(l,{visible:this.state.loading})));}});e.exports=ea;},null);
__d("P2PSendMoneyAmountInput.react",["CurrentEnvironment","React","XUIError.react","P2PAmountUtils","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=h,p=o.PropTypes,q=g.messengerdotcom,r=h.createClass({displayName:"P2PSendMoneyAmountInput",propTypes:{currencySymbol:p.string,onInputChange:p.func,value:p.string},getDefaultProps:function(){return {currencySymbol:'$',onInputChange:m,value:''};},getInitialState:function(){return {inputError:null,maxInputWidth:q?236:100,value:this.props.value,width:''};},componentDidMount:function(){this.updateAmount(this.state.value);this.initDelayedFocus();},initDelayedFocus:function(){setTimeout(this.focus);},focus:function(){var s,t=this.state.value,u=0;if(this.isMounted()&&this.refs.textInput){s=h.findDOMNode(this.refs.textInput);s.focus();if(t){u=t.length;s.setSelectionRange(u,u);}}},handleAmountInputChange:function(s){var t=s.target.value;this.clearInputError();this.updateAmount(t);},clearInputError:function(){this.setState({inputError:null});},setInputError:function(s){this.setState({inputError:s});},updateAmount:function(s){var t=true,u,v=j.isAmountOverLegalLimit(s);s=j.sanitizeAmount(s);u=parseFloat(s);if(v){t=false;this.setInputError(n._("Introduce un importe menor"));}var w=s.split('.'),x=w[0],y=w[1];if(y!==undefined){s=(x&&parseFloat(x)!==0?x:'0')+'.'+y.substr(0,2);}else if(x&&parseFloat(x)===0)s='0';this.setValue(s);u=parseFloat(s);t=t&&!isNaN(u)&&u>0;this.props.onInputChange(s,t);},setValue:function(s){this.setState({value:s},this.updateWidth);},updateWidth:function(){var s=this.getMockWidth();if(s)this.setState({width:Math.min(s,this.state.maxInputWidth)});},getMockWidth:function(){return h.findDOMNode(this.refs.mock_input).offsetWidth;},render:function(){var s;if(q&&!this.state.value.length)s=h.createElement("div",{ref:"placeholder_input",className:"_1-sv"},"0");return (h.createElement("div",{className:(("_ipw")+(q?' '+"_1-sw":''))},h.createElement("label",null,h.createElement(k,{className:"_3-91 _1-sx",display:"inline",type:"primary"},n._("Introduce el importe")),h.createElement("div",{className:(("_4puh")+(!this.state.value.length?' '+"_1-sy":''))},h.createElement("div",{className:"_5fbp"},this.props.currencySymbol),s,h.createElement("div",{ref:"mock_input",className:"_5fbs"},this.state.value),h.createElement(i,{xuiError:this.state.inputError},h.createElement("span",{className:"_1-sz"},h.createElement("input",{className:"_5fbv",onChange:this.handleAmountInputChange,ref:"textInput",style:{width:this.state.width},value:this.state.value})))))));}});e.exports=r;},null);
__d("P2PSendMoneyDialog.react",["Arbiter","CreditCardFormParam","CurrentEnvironment","Image.react","ImageBlock.react","Link.react","MessengerContextualDialog.react","P2PAPI","P2PAddCreditCardDialog.react","P2PButton.react","P2PCreditCardStore","P2PChooseCreditCardForm.react","P2PConfirmAmountDialog.react","P2PEditCreditCardDialog.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PSendMoneyAmountInput.react","P2PText.react","P2PVerifyCreditCardDialog.react","React","ReactLayeredComponentMixin","XUIContextualDialog.react","cx","fbt","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();'use strict';var ia=ca,ja=ia.PropTypes,ka=i.messengerdotcom,la=ga._("Cambiar"),ma=ga._("A\u00f1adir tarjeta de d\u00e9bito"),na=100,oa=ca.createClass({displayName:"P2PSendMoneyDialog",mixins:[da],propTypes:{amount:ja.string,currency:ja.string.isRequired,currencySymbol:ja.string.isRequired,groupThreadFBID:ja.string,onError:ja.func,onSendSuccess:ja.func,onToggle:ja.func,receiver:ja.object},getDefaultProps:function(){return {amount:'',onError:ha,onSendSuccess:ha,onToggle:ha,receiver:{}};},getInitialState:function(){var pa=q.getAll();return {asyncRequestState:q.getAsyncRequestState(),addCreditCardDialogShown:false,amount:this.props.amount,creditCards:pa,confirmAmountDialogShown:false,isAmountValid:false,loading:false,selectedCard:pa[0],showChooseCreditCardForm:false,verifyCreditCardDialogShown:false};},_isAmountVerified:false,passwordCancelSubscribeToken:null,log:function(pa,qa){w.log(pa,Object.assign({www_event_flow:y.UI_FLOW_P2P_SEND,object_id:this.props.receiver.userID},qa));},componentWillUnmount:function(){if(this.passwordCancelSubscribeToken!==null){g.unsubscribe(this.passwordCancelSubscribeToken);this.passwordCancelSubscribeToken=null;}if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},componentWillMount:function(){this.creditCardStoreSub=q.addListener('change',this.onCreditCardStoreChange);if(this.state.amount){this.log(x.UI_ACTN_INITIATE_SEND_TRIGGER,{raw_amount:this.state.amount,currency:this.props.currency});}else this.log(x.UI_ACTN_INITIATE_SEND);},onAmountInputChange:function(pa,qa){this.setState({amount:pa,isAmountValid:qa});},onCreditCardStoreChange:function(){var pa=q.getAll(),qa;if(this.state.selectedCard)qa=pa.filter(function(ra){return (ra.getCredentialId()===this.state.selectedCard.getCredentialId());}.bind(this))[0];if(!qa)qa=pa[0];this.setState({asyncRequestState:q.getAsyncRequestState(),creditCards:pa,selectedCard:qa});},shouldShowConfirmAmountDialog:function(){var pa=parseFloat(this.state.amount);return (!this._isAmountVerified&&pa>=na);},shouldShowVerifyCreditCardDialog:function(){return !this.state.selectedCard.getIsVerified();},shouldShowEditCreditCardDialog:function(){return this.state.selectedCard.isExpired();},handleSendClick:function(pa){if(this.isSendButtonDisabled())return false;this.log(x.UI_ACTN_SEND_CLICKED,{raw_amount:this.state.amount,currency:this.props.currency});this._isAmountVerified=false;this.initiatePayment();},initiatePayment:function(){if(this.shouldShowConfirmAmountDialog()){this.hideAllDialogs();this.setState({confirmAmountDialogShown:true});this.log(x.UI_ACTN_CONFIRM_AMOUNT,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowEditCreditCardDialog()){this.hideAllDialogs();this.setState({editCreditCardDialogShown:true});this.log(x.UI_ACTN_EDIT_CARD,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowVerifyCreditCardDialog()){this.hideAllDialogs();this.setState({verifyCreditCardDialogShown:true});this.log(x.UI_ACTN_VERIFY_CSC,{raw_amount:this.state.amount,currency:this.props.currency});return;}this.createTransaction();},shouldShowLoading:function(){return (!this.state.addCreditCardDialogShown&&!this.state.confirmAmountDialogShown&&!this.state.verifyCreditCardDialogShown&&!this.state.editCreditCardDialogShown);},createTransaction:function(){var pa={};this.setState({loading:this.shouldShowLoading()});pa[h.CREDENTIAL_ID]=this.state.selectedCard.getCredentialId();pa.amount=this.state.amount;pa.receiverId=this.props.receiver.userID;if(this.props.groupThreadFBID)pa.group_thread_fbid=this.props.groupThreadFBID;this.passwordCancelSubscribeToken=g.subscribeOnce('PasswordReauthDialogCancelClick',this.handlePasswordReauthDialogCancelClick);n.createTransaction({formData:pa,error:this.setCreateTransferError,success:this.setCreateTransferSuccess});this.log(x.UI_ACTN_CONFIRM_SEND,{raw_amount:this.state.amount,currency:this.props.currency});},hideAllDialogs:function(){this.setState({addCreditCardDialogShown:false,confirmAmountDialogShown:false,verifyCreditCardDialogShown:false,editCreditCardDialogShown:false});},setCreateTransferError:function(pa){if(this.isMounted()){this.hideAllDialogs();this.setState({loading:false});}this.props.onError(pa);this.log(x.UI_ACTN_SEND_FAIL);},setCreateTransferSuccess:function(pa){if(this.isMounted()){this.setState({loading:false});this.hideAllDialogs();}this.props.onSendSuccess(pa);this.log(x.UI_ACTN_SEND_SUCCESS);},handlePasswordReauthDialogCancelClick:function(){this.passwordCancelSubscribeToken=null;this.setState({loading:false});this.hideAllDialogs();},onAddCreditCardCancel:function(pa){this.setState({addCreditCardDialogShown:false});this.log(x.UI_ACTN_CANCEL_ADD_CARD,pa);},onAddCreditCardSaving:function(){this.log(x.UI_ACTN_CONFIRM_CARD_DETAILS);},onAddCreditCardSuccess:function(pa){var qa=this.state.creditCards.filter(function(ra){var sa=ra.getCredentialId();return (pa[h.CREDENTIAL_ID]===sa);})[0];this.setState({selectedCard:qa});if(this.state.isAmountValid){this.initiatePayment();}else{this.setState({addCreditCardDialogShown:false});this.focusAmountInput();}this.log(x.UI_ACTN_ADD_CARD_SUCCESS);},onAddCreditCardError:function(){this.log(x.UI_ACTN_ADD_CARD_FAIL);},onEditCreditCardSuccess:function(){this.initiatePayment();},onEditCreditCardCancel:function(){this.setState({editCreditCardDialogShown:false});},focusAmountInput:function(){if(this.refs.send_money_amount_input)ca.findDOMNode(this.refs.send_money_amount_input).focus();},_handleToggle:function(pa){this.props.onToggle(pa);if(!this.state.loading)this.log(x.UI_ACTN_SEND_MONEY_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},handleAddCreditCardClick:function(){this.setState({addCreditCardDialogShown:true,showChooseCreditCardForm:false});this.log(x.UI_ACTN_CHANGE_CARD);},handleBackClick:function(){this.setState({showChooseCreditCardForm:false},function(){this.focusAmountInput();});},handleChooseCardNextClick:function(){var pa=this.refs.choose_credit_card_form.getSelectedCard();this.setState({selectedCard:pa,showChooseCreditCardForm:false},function(){this.focusAmountInput();});},handleAddCardNextClick:function(){this.setState({addCreditCardDialogShown:true});this.log(x.UI_ACTN_INITIATE_ADD_CARD);},handleChangeSelectedCardClick:function(){var pa={};if(this.state.creditCards.length===1){pa.addCreditCardDialogShown=true;this.log(x.UI_ACTN_CHANGE_CARD);}else pa.showChooseCreditCardForm=true;this.setState(pa);},onConfirmAmountCancel:function(){this.setState({confirmAmountDialogShown:false});},onConfirmAmountSuccess:function(){this._isAmountVerified=true;this.initiatePayment();},onVerifyCreditCardSuccess:function(){this.initiatePayment();},onVerifyCreditCardCancel:function(){this.setState({verifyCreditCardDialogShown:false});},isSendButtonDisabled:function(){return (!this.state.isAmountValid||!this.state.creditCards.length||this.state.loading);},isAddCardNextButtonDisabled:function(){return !this.state.isAmountValid;},renderAddDebitCardLink:function(){return (ca.createElement(aa,{className:"_42h3",type:"secondary",ref:"send_money_dialog_add_card_text"},ca.createElement(l,{className:"_49nm",href:"#",onClick:this.handleAddCreditCardClick},ma)));},renderSelectedCard:function(){var pa=this.state.selectedCard;return (ca.createElement(aa,{className:"_21x5",size:"small",type:"primary"},ca.createElement("div",{className:"_49nn"},pa.getName()),ca.createElement("div",{className:"_21wx"},pa.getCreditCardNumberFormatted()),ca.createElement("div",{className:"_21ww"},'\u00b7'),ca.createElement(l,{className:"_21wy",onClick:this.handleChangeSelectedCardClick,href:"#"},la)));},renderFormButtons:function(){var pa;if(!this.state.creditCards.length){pa=this.renderAddCardNextButton();}else if(this.state.showChooseCreditCardForm){pa=ca.createElement("div",null,this.renderChooseCardBackButton(),this.renderChooseCardNextButton());}else pa=this.renderPayButton();return pa;},renderChooseCardBackButton:function(){return (ca.createElement(p,{className:"_2abj",label:ga._("Volver"),onClick:this.handleBackClick,ref:"back_button",size:"medium",type:"secondary",use:"default"}));},renderAddCardNextButton:function(){return (ca.createElement(p,{className:"_5p-b",disabled:this.isAddCardNextButtonDisabled(),label:ga._("Siguiente"),onClick:this.handleAddCardNextClick,ref:"add_card_next_button",size:"medium",type:"primary",use:"default"}));},renderChooseCardNextButton:function(){return (ca.createElement(p,{label:ga._("Siguiente"),onClick:this.handleChooseCardNextClick,ref:"choose_card_next_button",size:"medium",type:"primary",use:"confirm"}));},renderPayButton:function(){return (ca.createElement(p,{className:"_21x6 _5p-b",disabled:this.isSendButtonDisabled(),label:ga._("Pagar"),onClick:this.handleSendClick,ref:"send_button",size:"medium",type:"primary",use:"confirm"}));},renderPaymentDetails:function(){var pa;if(this.state.creditCards.length){if(this.state.showChooseCreditCardForm){pa=this.renderAddDebitCardLink();}else pa=this.renderSelectedCard();}else pa=ca.createElement("div",{className:"_2abl"},ca.createElement(aa,{type:"secondary",ref:"send_money_dialog_add_card_next_text"},ga._("El env\u00edo de dinero es gratuito y seguro")));return pa;},renderSendMoneyForm:function(){var pa=ka?32:40;return (ca.createElement("div",null,ca.createElement("div",{className:"_49no _2pi4",ref:"send_money_dialog_title"},ca.createElement(k,{spacing:"large"},ca.createElement(j,{className:"_5p-i",height:pa,src:this.props.receiver.big_image_src||this.props.receiver.image_src,width:pa}),ca.createElement("div",{className:"_3-8w"},ca.createElement(aa,{type:"secondary"},ga._("Enviar a")),ca.createElement(aa,{className:"_5p-j",size:"small",type:"primary",weight:"bold"},this.props.receiver.name))),ca.createElement(l,{className:"_49np",href:u.helpCenterURI,target:"_blank"})),ca.createElement("div",{className:"_2abm"},this.renderMainContainer()),ca.createElement("div",{className:(("_21w-")+(ka?' '+"_4eb_":''))},ca.createElement("div",{className:"_5p-k"},ca.createElement("div",{className:"_21x4"},this.renderPaymentDetails()),ca.createElement("div",{className:"_4zf-"},this.renderFormButtons())))));},renderMainContainer:function(){var pa;if(this.state.showChooseCreditCardForm){pa=ca.createElement("div",{className:"_xn7"},ca.createElement(r,{creditCards:this.state.creditCards,selectedCard:this.state.selectedCard,ref:"choose_credit_card_form"}));}else pa=ca.createElement("div",{className:"_2abn"},ca.createElement(z,{currencySymbol:this.props.currencySymbol,onInputChange:this.onAmountInputChange,ref:"send_money_amount_input",value:this.state.amount}));return pa;},renderLayers:function(){var pa={};if(this.state.addCreditCardDialogShown){pa.addCreditCard=ca.createElement(o,{asyncRequestState:this.state.asyncRequestState,ref:"send_money_dialog_add_credit_card_form",onCancel:this.onAddCreditCardCancel,onSuccess:this.onAddCreditCardSuccess,onError:this.onAddCreditCardError,onSaving:this.onAddCreditCardSaving,showPayButton:this.state.isAmountValid});}else if(this.state.confirmAmountDialogShown){pa.confirmAmount=ca.createElement(s,{amount:this.state.amount,currencySymbol:this.props.currencySymbol,onCancel:this.onConfirmAmountCancel,onConfirm:this.onConfirmAmountSuccess,receiverName:this.props.receiver.short_name});}else if(this.state.verifyCreditCardDialogShown){pa.verifyCreditCard=ca.createElement(ba,{asyncRequestState:this.state.asyncRequestState,creditCard:this.state.selectedCard,isSending:true,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess});}else if(this.state.editCreditCardDialogShown)pa.confirmAmount=ca.createElement(t,{asyncRequestState:this.state.asyncRequestState,creditCard:this.state.selectedCard,onCancel:this.onEditCreditCardCancel,onSuccess:this.onEditCreditCardSuccess});return pa;},render:function(){var pa=ka?m:ea,qa=ka?286:260;return (ca.createElement(pa,{alignment:ka?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:qa,position:this.props.position||'above'},ca.createElement("div",{className:(("_21x9")+(ka?' '+"_1pka":''))},this.renderSendMoneyForm(),ca.createElement(v,{ref:"send_money_dialog_loader",visible:this.state.loading}))));}});e.exports=oa;},null);
__d("P2PSuccessDialog.react",["CurrentEnvironment","Image.react","LayerFadeOnHide","LayerSlowlyFadeOnShow","LeftRight.react","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","ix","cx","fbt","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=l,x=w.PropTypes,y=l.createClass({displayName:"P2PSuccessDialog",propTypes:{onOKClick:x.func,title:x.string.isRequired},getDefaultProps:function(){return {onOKClick:v};},render:function(){var z=g.messengerdotcom,aa=z?350:300,ba=z?s("/images/p2p/checkmark-messenger.png"):s("/images/p2p/check_mark-sm.png"),ca=[l.createElement("div",{className:"_1tcj",key:"checkmark"},l.createElement(h,{height:50,width:50,src:ba})),l.createElement(r,{className:"_3exn",key:"confirmation_text",type:"primary"},this.props.children)];if(z)ca=l.createElement(k,{direction:"left"},ca);return (l.createElement(n,{behaviors:{LayerFadeOnShow:false,LayerSlowlyFadeOnShow:j,LayerFadeOnHide:i},className:(("_1tck")+(z?' '+"_1tcl":'')),layerHideOnBlur:false,ref:"dialog",repositionOnUpdate:true,shown:true,width:aa},l.createElement("div",{className:"_1tcm"},l.createElement(o,{className:"_1tcn",showCloseButton:false},this.props.title),l.createElement(p,null,ca),l.createElement(q,null,l.createElement(m,{use:"default",label:u._("Aceptar"),onClick:this.props.onOKClick})))));}});e.exports=y;},null);
__d("P2PSendMoneyDialogStore",["P2PActionConstants","EventEmitter","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j,k;for(var l in h)if(h.hasOwnProperty(l))n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(){h.call(this);k={};j=i.register(this.onEventDispatched.bind(this));}n.prototype.onEventDispatched=function(o){var p=o.data,q=o.type;switch(q){case g.CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(p);this.emit('change');break;case g.CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(p);this.emit('change');break;}};n.prototype.getStateByThreadID=function(o){return k[o];};n.prototype.handleChatSendViewOpened=function(o){k[o.threadID]={amount:o.amount,groupThreadFBID:o.groupThreadFBID,isOpen:true,groupSendReceiptDetails:o.groupSendReceiptDetails};};n.prototype.handleChatSendViewClosed=function(o){k[o.threadID]={amount:'',groupThreadFBID:'',isOpen:false,groupSendReceiptDetails:null};};e.exports=new n();},null);
__d("P2PUserEligibilityStore",["P2PActionConstants","EventEmitter","P2PAPI","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k,l;for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(){h.call(this);l={};k=j.register(this.onEventDispatched.bind(this));}o.prototype.onEventDispatched=function(p){var q=p.data,r=p.type;switch(r){case g.USER_ELIGIBILITY_UDPATED:this.handleEligibilityUpdated(q);this.emit('change');break;}};o.prototype.getEligibilityByUserIDs=function(p){var q=[],r,s,t={};for(var u=0;u<p.length;u++){s=p[u];r=l[s];if(r===(void 0)){l[s]=null;q.push(s);}t[s]=l[s];}if(q.length)i.getUserEligibility({userIDs:q});return t;};o.prototype.handleEligibilityUpdated=function(p){for(var q=0;q<p.length;q++)l[p[q].user_id]=p[q].p2p_eligible;};e.exports=new o();},null);